# TodoList 系统启动说明

## 快速启动（使用Docker Compose）

### 1. 确保已安装Docker和Docker Compose

### 2. 在项目根目录执行：

```bash
docker-compose up -d
```

### 3. 等待服务启动完成（约1-2分钟）

### 4. 访问系统：
- **前端界面**: http://localhost:3001
- **后端API**: http://localhost:3000
- **Swagger API文档**: http://localhost:3000/api

### 5. 停止服务：
```bash
docker-compose down
```

## 本地开发模式

### 后端开发

1. 进入后端目录：
```bash
cd backend
```

2. 安装依赖：
```bash
npm install
```

3. 启动PostgreSQL数据库（使用Docker）：
```bash
docker run -d --name postgres-todolist -e POSTGRES_PASSWORD=postgres -e POSTGRES_DB=todolist -p 5432:5432 postgres:15-alpine
```

4. 创建 `.env` 文件（参考 `.env.example`）：
```env
DB_HOST=localhost
DB_PORT=5432
DB_USERNAME=postgres
DB_PASSWORD=postgres
DB_DATABASE=todolist
JWT_SECRET=your-secret-key-change-in-production
PORT=3000
NODE_ENV=development
FRONTEND_URL=http://localhost:3001
```

5. 启动开发服务器：
```bash
npm run start:dev
```

### 前端开发

1. 进入前端目录：
```bash
cd frontend
```

2. 安装依赖：
```bash
npm install
```

3. 启动开发服务器：
```bash
npm start
```

前端将在 http://localhost:3000 启动（注意：React默认端口是3000，如果与后端冲突会自动使用3001）

## 使用说明

### 1. 注册账号
- 访问登录页面，点击"注册"
- 填写姓名、邮箱和密码（至少6位）
- 注册成功后自动登录

### 2. 创建任务
- 登录后进入Dashboard
- 点击"新建任务"按钮
- 填写任务标题、描述和计划完成时间
- 创建后可以在任务列表中看到

### 3. 管理任务
- 点击任务卡片查看详情
- 在任务详情中可以：
  - 修改任务状态（待办/进行中/已完成）
  - 添加评论（历史记录）
  - 查看子任务
- 在任务卡片上可以直接修改状态或删除任务

### 4. 筛选和排序
- 在任务列表上方使用筛选器：
  - 按时间段筛选
  - 按创建者筛选
  - 按执行人筛选
  - 选择排序字段和方向

### 5. 创建团队（API）
- 使用Swagger文档（http://localhost:3000/api）或API工具
- POST /teams 创建团队
- POST /teams/:id/members 添加成员

### 6. 指派任务（API）
- POST /tasks/:id/assign 指派执行人
- POST /tasks/:id/watchers 添加关注人

## API文档

访问 http://localhost:3000/api 查看完整的Swagger API文档。

所有API都需要Bearer Token认证（登录后获取的access_token）。

## 常见问题

### 1. 端口冲突
如果3000或3001端口被占用，可以修改：
- `docker-compose.yml` 中的端口映射
- 后端的 `.env` 文件中的 `PORT`
- 前端的 `package.json` 中的 `proxy` 配置

### 2. 数据库连接失败
- 确保PostgreSQL服务正在运行
- 检查 `.env` 文件中的数据库配置
- 检查数据库容器是否正常启动：`docker ps`

### 3. 前端无法连接后端
- 检查后端服务是否正常运行
- 检查CORS配置
- 检查前端的API地址配置

## 技术架构

- **后端**: Nest.js + TypeORM + PostgreSQL + JWT认证
- **前端**: React + TypeScript + Axios
- **部署**: Docker + Docker Compose

## 功能规划文档

详细的功能规划（消息提醒、定时重复任务）请查看 `README.md` 文件。
